# Node js Email API

## Development setup
* Install node js on machine
* Checkout the repository 
* Rename 'config/default.example.json' to 'config/default.json'
* Update SMTP details in 'default.json'
* Open command line tool in directory where index.js 
* Execute command ``` npm install ```
* Execute command ``` node index.js ```
* You can replace this file with your app name e.g 'emailApp.js'

## Server setup
* Install node js on server, for more information *[Click Here](https://nodejs.org/en/docs/)*
* Install pm2 globally on server ``` npm install pm2 -g ```, for more inforamtion *[Click Here](https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/)*
* Rename 'config/default.example.json' to 'config/default.json'
* Update SMTP details in 'default.json'
* Execute command ``` npm install ```
* Start node server ``` pm2 start <YourStartUpFileName>.js```

## Request body

### Get Auth Token 
**Route** <br />
``` http://{domain}:{port}/admin/getKey ``` <br />
**POST Request** <br />
*Body:-* 
```
{
    "clientId" : "clientId",
    "expiryinDays": 50
}
``` 

*Header:-*

``` 
{
    "secretkey": "<Token generated by generate key above API>"
}
```

### Send Email
**Route** <br />
``` http://{domain}:{port}/email/send ``` <br />
**POST Request** <br />
*Header:-*

``` 
{
    "secretkey": "<Admin key which is mentioned in defualt.json>"
}
```

*Body:-*
```
{
    "fromName": "My Name",
    "fromEmail": "example@email.com",
    "toEmails": "example@email.com, example@email.com",
    "cCEmails": "example@email.com, example@email.com",
    "bccEmails": "example@email.com, example@email.com",
    "replyToEmails": "example@email.com, example@email.com",
    "subject": "Subject",
    "htmlBody": "<b>Welcome</b>",
    "textBody": "welcome Test"
}
```
*Note:- ``` fromName, fromEmail, toEmails, cCEmails, bccEmails, replyToEmails ```* are optional fields if you not sent through request body, API will take it from client configuration file